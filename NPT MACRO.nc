
%
O09016 (NPT MACRO) 
#3003= 1 (SINGLE BLOCK SUPPRESSED) 
(SKIPS TO MACHINE MOVEMENT) 


(SET MACRO CALL 9016 TO 152) 

(I: DIA OF GAGE TIP) 
(J: TPI) 
(D: CUTTER DIA W/ WEAR COMP) 
(E: PLUNGE RATE) 
(F: FEED) 
(Z: START DEPTH) 


(EXAMPLE:) 

(G152 I2.81 J8 Z-.78 E50. F40. D22) 

(FOR 2.5 X 8TPI NPT THREAD.) 

(2.81 O.D. OF SMALLEST THREAD ON GAGE.) 
(8 TPI.) 
(Z-.78 START OF THREADING.) 

(USE DISTANCE FROM TIP TO FLAT ON GAGE) 
(PLUS ONE THREAD FOR DEPTH.) 

(50. IPM PLUNGE RATE.) 
(40. IPM FEED.) 
(USE D22) 

(IF NO E, PLUNGE RATE WILL BE SAME AS FEED) 
(WILL ALWAYS FINISH APPROX .08 ABOVE Z0) 
(NO MATTER START DEPTH) 


IF [ #4 EQ #0 ] #3000= 1 (NO I: INPUT GAGE DIA.) 
IF [ #5 EQ #0 ] #3000= 1 (NO J: INPUT TPI.) 
IF [ #5 LT 0.9999 ] #5= #5 * 10000 
(IF NO DECIMAL MULTIPY BY 10000) 

IF [ #7 EQ #0 ] #3000= 1 (NO D: INPUT CUTTER DIA.) 

IF [ #9 EQ #0 ] #3001= 1 (NO F: INPUT FEED RATE.) 
IF [ #8 EQ #0 ] #8= #9 

IF [ #26 EQ #0 ] #3000= 1 (NO Z: INPUT DEPTH) 
IF [ #26 GE 0 ] #3000= 1 (Z MUST BE NEGATIVE) 

(GET CUTTER DIA/WEAR FROM OFFSET PAGE) 
#7= [ #[ 2400 + #7 ] + #[ 2600 + #7 ] ] 

#1= 0 (STEPOUT VAR) 

(RADIUS VAR = GAGE RAD - CUTTER RAD) 
#2= [ [ #4 / 2 ] - [ #7 / 2 ] ] 


#3003= 0 (SINGLE BLOCK RESTORED) 
(SINGLE POINT START SUB) 
N200 G90 G01 Z#26 F#8 

(MOVE OUTWARDS GAGE RAD - CUTTER RAD) 
G03 G91 I [ #2 / 2 ] X#2 F#9 

(LOOP G3 [Z DEPTH * THREAD PITCH +1] TIMES) 
(ALWAYS CLEARS TOP OF HOLE) 
(NO MATTER HOW MANY THREADS NEEDED) 

M97 P301 L [ [ ABS[ #26 ] * #5 ] + 1 ] 

(RETURN TO CENTER) 
G03 X - [ #1 + #2 ] I - [ [ #1 + #2 ] / 2 ] 
G00 G90 Z0.3 M99 


(G3 IN QUADRANTS LOOP) 
(ARC RAD IS GAGE RAD - CUTTER RAD + STEPOUT) 
(Z UP 1/4 PITCH) 

(FIRST QUADRANT) 
N301 G03 X - [ #1 + #2 ] Y [ #1 + #2 ] I - [ #1 + #2 ] Z [ 0.25 / #5 ] F#9 

(STEPOUT 1/128 IN / PITCH) 
G01 Y [ 0.0078125 / #5 ] 

(INCREMENT STEPOUT BY 1/128 IN / PITCH) 
#1= [ #1 + [ 0.0078125 / #5 ] ] 


(2ND QUAD) 
G03 X - [ #1 + #2 ] Y - [ #1 + #2 ] J - [ #1 + #2 ] Z [ 0.25 / #5 ] 

G01 X - [ 0.0078125 / #5 ] 

#1= [ #1 + [ 0.0078125 / #5 ] ] 


(3RD QUAD) 
G03 X [ #1 + #2 ] Y - [ #1 + #2 ] I [ #1 + #2 ] Z [ 0.25 / #5 ] 

G01 Y - [ 0.0078125 / #5 ] 

#1= [ #1 + [ 0.0078125 / #5 ] ] 


(4TH QUAD) 
G03 X [ #1 + #2 ] Y [ #1 + #2 ] J [ #1 + #2 ] Z [ 0.25 / #5 ] 

G01 X [ 0.0078125 / #5 ] 

#1= [ #1 + [ 0.0078125 / #5 ] ] 
M99 
%
